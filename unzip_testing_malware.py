# Decompresses the 1000 2018 VT training malware from Michael

import os
import sys

test_data_file_path = sys.argv[1]
sig_in_path = sys.argv[2]
sig_out_path = sys.argv[3]
num_samples = sys.argv[4]

test_data_file = open(test_data_file_path, 'r')
count = 0
for line in test_data_file:
    apk_name = os.path.basename(line.rstrip('\n'))
    txt_name_zipped = apk_name + '.dex.txt.training.dat.ACFG.zip'
    copy_command = 'cp ' + sig_in_path + '/' + txt_name_zipped + ' ' + sig_out_path + '/' + txt_name_zipped
    print('Copying: ' + copy_command + ', ' + str(count) + '/' + num_samples + ' in progress')
    os.system(copy_command)
    count += 1