# Decompresses the 1000 2018 VT training malware from Michael

import os

train_data_file = open('/nfs/home/DatasetsForTools/DatasetsForTools/DroidNativeExperiments/general_malware_2018_train.txt', 'r')
count = 0
for line in train_data_file:
    apk_name = os.path.basename(line.rstrip('\n'))
    txt_path_zipped = '/nfs/home2/guanxiong/disassembly/2018/malware_txt/' + apk_name + '.dex.txt.zip'
    unzip_command = 'unzip -q -j ' + txt_path_zipped + ' -d ' + '/nfs/home2/guanxiong/disassembly/2018/1000_malware_txt_unzipped/'
    print('Unzipping: ' + unzip_command + ', ' + str(count) + '/1000 in progress')
    os.system(unzip_command)
    count += 1